<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HVAC Management Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<h1>HVAC Management Dashboard</h1>

<h2>Job Statistics</h2>
<p>Total Jobs: {{ stats.total_jobs }}</p>
<p>Completed Jobs: {{ stats.completed_jobs }}</p>
<p>Pending Jobs: {{ stats.pending_jobs }}</p>

<div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
    <div style="width: 45%; padding: 10px;">
        <canvas id="completionChart"></canvas>
    </div>
    <div style="width: 45%; padding: 10px;">
        <canvas id="technicianChart"></canvas>
    </div>
</div>

<script>
const completionData = {
    labels: ['Completed', 'Pending'],
    datasets: [{
        data: [{{ stats.completed_jobs }}, {{ stats.pending_jobs }}],
        backgroundColor: ['#4caf50', '#f44336']
    }]
};

const technicianData = {
    labels: {{ stats.technician_names | safe }},
    datasets: [{
        label: 'Jobs Completed',
        data: {{ stats.technician_counts | safe }},
        backgroundColor: '#2196f3'
    }]
};

new Chart(document.getElementById('completionChart').getContext('2d'), {
    type: 'pie',
    data: completionData
});

new Chart(document.getElementById('technicianChart').getContext('2d'), {
    type: 'bar',
    data: technicianData,
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>

<br>
<a href="/">Back to Home</a>
</body>
</html>
